---
import UserIcon from "./icons/UserIcon.astro";
import Heading from "./atoms/Heading.astro";
import Text from "./atoms/Text.astro";
import Card from "./atoms/Card.astro";
import Button from "./atoms/Button.astro";
import { personalInfo } from "../data/portfolio.js";
---

<div class="w-full reveal-section">
  <Heading 
    level={2} 
    class="mb-2 flex items-center gap-2 reveal-item"
  >
    <UserIcon class="inline-block w-7 h-7 md:w-8 md:h-8" />
    Sobre Mí
  </Heading>
  <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 items-start">    <!-- Foto e info personal -->
    <div
      class="lg:col-span-4 flex flex-col items-center lg:items-start reveal-item"
    >
      <Card class="p-0 overflow-hidden mb-6">
        <div class="relative w-64 h-80 rounded-lg overflow-hidden mx-auto">
          <img
            src="/assets/img/profile-2.webp"
            alt={`Foto de ${personalInfo.name}`}
            class="w-full h-full object-cover"
            onerror={`this.src='${personalInfo.profileImageFallback}';`}
          />
        </div>
      </Card>
      
      <Card class="w-full max-w-sm p-4">
        <ul class="space-y-3">
          <li class="flex items-start gap-2">
            <Text variant="body-sm" class="font-semibold min-w-20 text-secondary">Ubicación:</Text>
            <Text variant="body-sm">{personalInfo.location}</Text>
          </li>
          <li class="flex items-start gap-2">
            <Text variant="body-sm" class="font-semibold min-w-20 text-secondary">Educación:</Text>
            <Text variant="body-sm">Ing. en Sistemas de la Información y Ciencias de la Computación</Text>
          </li>
          <li class="flex items-start gap-2">
            <Text variant="body-sm" class="font-semibold min-w-20 text-secondary">Universidad:</Text>
            <Text variant="body-sm">Universidad Mariano Galvez de Guatemala</Text>
          </li>
          <li class="flex items-start gap-2">
            <Text variant="body-sm" class="font-semibold min-w-20 text-secondary">Idiomas:</Text>
            <div class="flex-1">
              <div class="space-y-2">
                <div class="flex items-center justify-between">
                  <Text variant="body-sm">Español (Nativo)</Text>
                  <Text variant="body-sm" class="text-secondary">100%</Text>
                </div>
                <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                  <div class="bg-gradient-to-r from-primary to-primary/80 h-2 rounded-full" style="width: 100%"></div>
                </div>
                <div class="flex items-center justify-between">
                  <Text variant="body-sm">Inglés (B2)</Text>
                  <Text variant="body-sm" class="text-secondary">75%</Text>
                </div>
                <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                  <div class="bg-gradient-to-r from-primary to-primary/80 h-2 rounded-full" style="width: 75%"></div>
                </div>
              </div>
            </div>
          </li>
          <li class="flex items-start gap-2">
            <Text variant="body-sm" class="font-semibold min-w-20 text-secondary">Stacks:</Text>
            <Text variant="body-sm">Java, Angular, Python</Text>
          </li>
        </ul>
      </Card>
    </div>    <!-- Biografía y habilidades -->
    <div class="lg:col-span-8 space-y-6">
      <div class="reveal-item" style="--reveal-delay: 100ms">
        <Heading level={3} class="mb-3">
          Mi Historia
        </Heading>
        <div class="space-y-4">
          <Text variant="body">
            Analista de QA especializado en pruebas manuales y automatizadas, con sólida experiencia en desarrollo frontend usando Angular y Java. He participado en múltiples proyectos adquiriendo experiencia integral en calidad de software y desarrollo.
          </Text>

          <Text variant="body">
            Mi pasión por la tecnología comenzó desde temprana edad, explorando hardware y software. Me especializo en aseguramiento de calidad, mejora continua y aprendizaje constante, siempre buscando la excelencia y colaboración efectiva en equipo.
          </Text>
        </div>
      </div>

      <!-- Estadísticas profesionales -->
      <div class="reveal-item" style="--reveal-delay: 200ms">
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
          <Card class="p-4 text-center">
            <div class="text-2xl font-bold text-primary mb-1">3+</div>
            <Text variant="body-sm" class="text-secondary">Años experiencia</Text>
          </Card>
          <Card class="p-4 text-center">
            <div class="text-2xl font-bold text-primary mb-1">10+</div>
            <Text variant="body-sm" class="text-secondary">Proyectos completados</Text>
          </Card>
          <Card class="p-4 text-center">
            <div class="text-2xl font-bold text-primary mb-1">4+</div>
            <Text variant="body-sm" class="text-secondary">Tecnologías</Text>
          </Card>
          <Card class="p-4 text-center">
            <div class="text-2xl font-bold text-primary mb-1">15+</div>
            <Text variant="body-sm" class="text-secondary">Certificaciones</Text>
          </Card>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <!-- Soft Skills -->
        <Card class="p-6">
          <Heading level={4} class="mb-3 text-secondary">
            Habilidades Blandas
          </Heading>
          <ul class="space-y-2">
            <li class="flex items-center gap-3">
              <div class="w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center">
                <svg class="w-4 h-4 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
                </svg>
              </div>
              <Text variant="body-sm">Trabajo en equipo</Text>
            </li>
            <li class="flex items-center gap-3">
              <div class="w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center">
                <svg class="w-4 h-4 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
                </svg>
              </div>
              <Text variant="body-sm">Comunicación efectiva</Text>
            </li>
            <li class="flex items-center gap-3">
              <div class="w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center">
                <svg class="w-4 h-4 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
                </svg>
              </div>
              <Text variant="body-sm">Resolución de problemas</Text>
            </li>
            <li class="flex items-center gap-3">
              <div class="w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center">
                <svg class="w-4 h-4 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                </svg>
              </div>
              <Text variant="body-sm">Adaptabilidad</Text>
            </li>
          </ul>
        </Card>
        <Card class="p-6">
          <Heading level={4} class="mb-3 text-secondary flex items-center gap-2">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
            QA & Testing
          </Heading>
          <ul class="space-y-2">
            <li class="flex items-start gap-2">
              <span class="text-accent leading-none mt-0.5">•</span>
              <Text variant="body-sm">Pruebas funcionales (manuales y automatizadas)</Text>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-accent leading-none mt-0.5">•</span>
              <Text variant="body-sm">Selenium WebDriver</Text>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-accent leading-none mt-0.5">•</span>
              <Text variant="body-sm">Postman (APIs y Flows)</Text>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-accent leading-none mt-0.5">•</span>
              <Text variant="body-sm">Jira y X-Ray para gestión de pruebas</Text>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-accent leading-none mt-0.5">•</span>
              <Text variant="body-sm">Redacción de casos de prueba y documentación técnica</Text>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-accent leading-none mt-0.5">•</span>
              <Text variant="body-sm">Análisis técnico y reportes de defectos</Text>
            </li>
          </ul>
        </Card>
        
        <Card class="p-6">
          <Heading level={4} class="mb-3 text-secondary flex items-center gap-2">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"/>
            </svg>
            Desarrollo
          </Heading>
          <ul class="space-y-2">
            <li class="flex items-start gap-2">
              <span class="text-accent leading-none mt-0.5">•</span>
              <Text variant="body-sm">Automatización con Python</Text>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-accent leading-none mt-0.5">•</span>
              <Text variant="body-sm">Desarrollo web con HTML, CSS y JavaScript</Text>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-accent leading-none mt-0.5">•</span>
              <Text variant="body-sm">Angular & TypeScript (Frontend)</Text>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-accent leading-none mt-0.5">•</span>
              <Text variant="body-sm">SQL para consultas y análisis de datos</Text>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-accent leading-none mt-0.5">•</span>
              <Text variant="body-sm">Java y Swing (aplicaciones de escritorio)</Text>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-accent leading-none mt-0.5">•</span>
              <Text variant="body-sm">VB.NET / ASP.NET (básico/intermedio)</Text>
            </li>
          </ul>
        </Card>
      </div>

      <!-- Call to Action -->
      <div class="reveal-item text-center" style="--reveal-delay: 400ms">
        <Card class="p-8 bg-gradient-to-r from-primary/5 to-primary/10 border border-primary/20">
          <Heading level={3} class="mb-3">
            ¿Interesado en trabajar juntos?
          </Heading>
          <Text variant="body" class="mb-6">
            Estoy siempre abierto a nuevas oportunidades y proyectos desafiantes donde pueda aportar mi experiencia en QA y desarrollo.
          </Text>
          <Button variant="primary" size="lg" href="#contacto" class="group">
            Hablemos
            <svg class="w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
            </svg>
          </Button>
        </Card>
      </div>

      <div class="reveal-item" style="--reveal-delay: 300ms">
        <Heading level={3} class="mb-3">
          Intereses
        </Heading>
        <Text variant="body">
          Fuera del trabajo, disfruto aprender sobre temas nuevos. Además, tengo
          una gran pasión por el fútbol; estuve muy cerca de convertirme en
          futbolista amateur en la liga nacional de Guatemala. Me gusta ver
          fútbol, explorar áreas en las que aún no soy experto para expandir mis
          horizontes, y conocer personas en todos los lugares posibles.
        </Text>
      </div>
    </div>
  </div>
</div>

<style>
  .reveal-section {
    opacity: 1;
    visibility: visible;
  }

  .reveal-item {
    opacity: 0;
    transform: translateY(30px);
    transition:
      opacity 0.6s ease-out,
      transform 0.8s ease-out;
    transition-delay: var(--reveal-delay, 0ms);
  }

  .reveal-item.is-revealed {
    opacity: 1;
    transform: translateY(0);
  }
</style>

<script>
  // Configuración de las animaciones de revelación al hacer scroll
  document.addEventListener("DOMContentLoaded", () => {
    const revealItems = document.querySelectorAll(".reveal-item");

    if ("IntersectionObserver" in window) {
      const revealObserver = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.classList.add("is-revealed");
              revealObserver.unobserve(entry.target); // Solo animar una vez
            }
          });
        },
        {
          threshold: 0.1, // 10% del elemento visible
          rootMargin: "0px 0px -50px 0px", // Trigger un poco antes
        }
      );

      revealItems.forEach((item) => {
        revealObserver.observe(item);
      });
    } else {
      // Fallback para navegadores sin soporte
      revealItems.forEach((item) => {
        item.classList.add("is-revealed");
      });
    }
  });
</script>
